"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[143],{7143:(I,m,a)=>{a.r(m),a.d(m,{LoginComponent:()=>x});var p=a(6895),r=a(433),_=a(9427),n=a(1571),c=a(4377),f=a(2018);function h(t,l){if(1&t&&(n.TgZ(0,"div",14)(1,"p",15),n._uU(2),n.qZA()()),2&t){const i=n.oxw();n.xp6(2),n.Oqu(i.apiError)}}function v(t,l){1&t&&(n.TgZ(0,"p",18),n._uU(1," Email is required "),n.qZA())}function T(t,l){1&t&&(n.TgZ(0,"p",18),n._uU(1," Email is inValid "),n.qZA())}function Z(t,l){if(1&t&&(n.TgZ(0,"div",16),n.YNc(1,v,2,0,"p",17),n.YNc(2,T,2,0,"p",17),n.qZA()),2&t){const i=n.oxw();let e,o;n.xp6(1),n.Q6J("ngIf",null==(e=i.loginForm.get("email"))?null:e.getError("required")),n.xp6(1),n.Q6J("ngIf",null==(o=i.loginForm.get("email"))?null:o.getError("email"))}}function L(t,l){1&t&&(n.TgZ(0,"p",18),n._uU(1," Password is required "),n.qZA())}function C(t,l){1&t&&(n.TgZ(0,"p",18),n._uU(1," must be "),n._UZ(2,"br"),n._uU(3," * Start with a letter (either uppercase or lowercase). "),n._UZ(4,"br"),n._uU(5," * Be between 6 and 15 characters in total. "),n._UZ(6,"br"),n._uU(7," * Can only contain letters (A-Z or a-z) and numbers (0-9) "),n.qZA())}function E(t,l){if(1&t&&(n.TgZ(0,"div",16),n.YNc(1,L,2,0,"p",17),n.YNc(2,C,8,0,"p",17),n.qZA()),2&t){const i=n.oxw();let e,o;n.xp6(1),n.Q6J("ngIf",null==(e=i.loginForm.get("password"))?null:e.getError("required")),n.xp6(1),n.Q6J("ngIf",null==(o=i.loginForm.get("password"))?null:o.getError("pattern"))}}function w(t,l){1&t&&n._UZ(0,"i",19)}function A(t,l){1&t&&(n.TgZ(0,"span"),n._uU(1,"Login"),n.qZA())}const d=function(t,l){return{"is-invalid":t,"is-valid":l}};let x=(()=>{class t{constructor(i,e,o){this._AuthService=i,this._Router=e,this._ToastrService=o,this.isLoading=!1,this.apiError=null,this.loginForm=new r.cw({email:new r.NI(null,[r.kI.required,r.kI.email]),password:new r.NI(null,[r.kI.required,r.kI.pattern(/^[A-Za-z0-9]{6,15}$/)])}),null!==localStorage.getItem("userToken")&&e.navigate(["/home"])}handleLogin(i){this.isLoading=!0,i.valid&&this._AuthService.login(i.value).subscribe({next:e=>{"success"===e.message&&(this.isLoading=!1,localStorage.setItem("userToken",e.token),this._AuthService.decodeUserData(),this._AuthService.userName.subscribe({next:o=>{this.username=o,this._ToastrService.success(null!==this.username?` welcome ${this.username}`:" welcome Back")}}),this._Router.navigate(["/home"]))},error:e=>{this.isLoading=!1,this.apiError=e.error.message}})}clearApiError(){this.apiError=null}}return t.\u0275fac=function(i){return new(i||t)(n.Y36(c.e),n.Y36(_.F0),n.Y36(f._W))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-login"]],standalone:!0,features:[n.jDz],decls:20,vars:15,consts:[[1,"mx-auto","my-5","form-login","bg-color","txt",3,"formGroup","ngSubmit"],[1,"title"],["class","alert alert-danger",4,"ngIf"],["for","email",1,"fw-bold","txt-color"],["type","text","id","email","placeholder","Email","formControlName","email",1,"form-control","my-2",3,"ngClass","input"],["class","alert alert-danger p-1",4,"ngIf"],["for","password",1,"fw-bold","txt-color"],["type","password","id","password","placeholder","password","formControlName","password",1,"form-control","my-2",3,"ngClass","input"],[1,"d-flex","justify-content-center","align-items-center","pt-2","flex-column"],[1,"signup","fs-6","txt-grey"],["routerLink","/signup",1,"text-main"],["type","submit",1,"btn","bg-main","text-white",3,"disabled"],["class","fa fa-spinner fa-spin",4,"ngIf"],[4,"ngIf"],[1,"alert","alert-danger"],[1,"m-0","p-0","text-danger"],[1,"alert","alert-danger","p-1"],["class","m-0 text-danger",4,"ngIf"],[1,"m-0","text-danger"],[1,"fa","fa-spinner","fa-spin"]],template:function(i,e){if(1&i&&(n.TgZ(0,"form",0),n.NdJ("ngSubmit",function(){return e.handleLogin(e.loginForm)}),n.TgZ(1,"h3",1),n._uU(2,"Login"),n.qZA(),n.YNc(3,h,3,1,"div",2),n.TgZ(4,"label",3),n._uU(5,"Email:"),n.qZA(),n.TgZ(6,"input",4),n.NdJ("input",function(){return e.clearApiError()}),n.qZA(),n.YNc(7,Z,3,2,"div",5),n.TgZ(8,"label",6),n._uU(9,"password:"),n.qZA(),n.TgZ(10,"input",7),n.NdJ("input",function(){return e.clearApiError()}),n.qZA(),n.YNc(11,E,3,2,"div",5),n.TgZ(12,"div",8)(13,"p",9),n._uU(14," Don't have an account? "),n.TgZ(15,"a",10),n._uU(16,"Sign up"),n.qZA()(),n.TgZ(17,"button",11),n.YNc(18,w,1,0,"i",12),n.YNc(19,A,2,0,"span",13),n.qZA()()()),2&i){let o,u,s,g;n.Q6J("formGroup",e.loginForm),n.xp6(3),n.Q6J("ngIf",e.apiError),n.xp6(3),n.Q6J("ngClass",n.WLB(9,d,(null==(o=e.loginForm.get("email"))?null:o.invalid)&&(null==(o=e.loginForm.get("email"))?null:o.touched),(null==(o=e.loginForm.get("email"))?null:o.valid)&&(null==(o=e.loginForm.get("email"))?null:o.touched))),n.xp6(1),n.Q6J("ngIf",(null==(u=e.loginForm.get("email"))?null:u.errors)&&(null==(u=e.loginForm.get("email"))?null:u.touched)),n.xp6(3),n.Q6J("ngClass",n.WLB(12,d,(null==(s=e.loginForm.get("password"))?null:s.invalid)&&(null==(s=e.loginForm.get("password"))?null:s.touched),(null==(s=e.loginForm.get("password"))?null:s.valid)&&(null==(s=e.loginForm.get("password"))?null:s.touched))),n.xp6(1),n.Q6J("ngIf",(null==(g=e.loginForm.get("password"))?null:g.errors)&&(null==(g=e.loginForm.get("password"))?null:g.touched)),n.xp6(6),n.Q6J("disabled",e.loginForm.invalid),n.xp6(1),n.Q6J("ngIf",e.isLoading),n.xp6(1),n.Q6J("ngIf",!e.isLoading)}},dependencies:[p.ez,p.mk,p.O5,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,_.rH],styles:["form[_ngcontent-%COMP%]{width:min(900px,100%);border-radius:.75rem;padding:2rem}.title[_ngcontent-%COMP%]{text-align:center;font-size:1.5rem;line-height:2rem;font-weight:700;color:var(--txt)}.form-control[_ngcontent-%COMP%]{width:100%;border-radius:.375rem;border:1px solid rgba(55,65,81,1);outline:0;background-color:var(--bg);padding:.75rem 1rem;color:var(--txt)}"]}),t})()}}]);